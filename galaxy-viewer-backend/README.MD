# Galaxy Viewer Backend API

Backend API cho dá»± Ã¡n Galaxy Viewer - má»™t á»©ng dá»¥ng táº¡o thiÃªn hÃ  thÃ´ng Ä‘iá»‡p lÃ£ng máº¡n.

## âœ¨ TÃ­nh nÄƒng

- ğŸŒŒ Táº¡o vÃ  quáº£n lÃ½ cÃ¡c thiÃªn hÃ  thÃ´ng Ä‘iá»‡p
- ğŸ’ Upload hÃ¬nh áº£nh vÃ  nháº¡c ná»n
- â¤ï¸ Hiá»‡u á»©ng trÃ¡i tim lÃ£ng máº¡n
- ğŸ“± Tá»‘i Æ°u cho mobile vÃ  desktop
- ğŸ”„ API RESTful Ä‘áº§y Ä‘á»§
- ğŸ“ Quáº£n lÃ½ file upload
- ğŸ’¾ LÆ°u trá»¯ dá»¯ liá»‡u JSON (cÃ³ thá»ƒ má»Ÿ rá»™ng vá»›i database)

## ğŸš€ CÃ i Ä‘áº·t

### YÃªu cáº§u há»‡ thá»‘ng
- Node.js >= 14.0.0
- npm >= 6.0.0

### BÆ°á»›c 1: Clone repository
```bash
git clone <repository-url>
cd galaxy-viewer-backend
```

### BÆ°á»›c 2: CÃ i Ä‘áº·t dependencies
```bash
npm install
```

### BÆ°á»›c 3: Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng
```bash
cp .env.example .env
```
Chá»‰nh sá»­a file `.env` theo cáº¥u hÃ¬nh cá»§a báº¡n.

### BÆ°á»›c 4: Cháº¡y server
```bash
# Development mode vá»›i nodemon
npm run dev

# Production mode
npm start
```

Server sáº½ cháº¡y táº¡i `http://localhost:3000`

## ğŸ“š API Documentation

### Base URL
```
http://localhost:3000/api
```

### Endpoints

#### 1. Health Check
```http
GET /health
```
Kiá»ƒm tra tráº¡ng thÃ¡i server.

#### 2. Láº¥y danh sÃ¡ch galaxies
```http
GET /api/galaxies
```
Tráº£ vá» danh sÃ¡ch táº¥t cáº£ galaxies vá»›i thÃ´ng tin cÆ¡ báº£n.

#### 3. Láº¥y galaxy theo ID
```http
GET /api/galaxies/:id
```
Láº¥y thÃ´ng tin chi tiáº¿t cá»§a má»™t galaxy.

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "messages": ["Tin nháº¯n 1", "Tin nháº¯n 2"],
    "icons": ["â™¥", "ğŸ’–", "â¤ï¸"],
    "colors": "#ff6b9d",
    "images": ["url1", "url2"],
    "song": "song_url",
    "textHeart": "TÃªn ngÆ°á»i yÃªu",
    "isHeart": true,
    "isSave": true,
    "createdAt": "2025-01-01T00:00:00.000Z"
  }
}
```

#### 4. Táº¡o galaxy má»›i
```http
POST /api/galaxies
```

**Form Data:**
- `messages`: JSON array cá»§a cÃ¡c tin nháº¯n
- `icons`: JSON array cá»§a cÃ¡c icon (optional)
- `colors`: MÃ u chá»§ Ä‘áº¡o (optional, default: #ff6b9d)
- `textHeart`: TÃªn hiá»ƒn thá»‹ trÃªn trÃ¡i tim
- `isHeart`: Boolean - cÃ³ hiá»ƒn thá»‹ hiá»‡u á»©ng trÃ¡i tim khÃ´ng
- `song`: File nháº¡c ná»n (optional)
- `images`: File hÃ¬nh áº£nh (tá»‘i Ä‘a 10 files)

**Example cURL:**
```bash
curl -X POST http://localhost:3000/api/galaxies \
  -F 'messages=["Anh yÃªu em", "Em lÃ  táº¥t cáº£ vá»›i anh"]' \
  -F 'icons=["â™¥", "ğŸ’–"]' \
  -F 'colors=#ff6b9d' \
  -F 'textHeart=My Love' \
  -F 'isHeart=true' \
  -F 'song=@path/to/song.mp3' \
  -F 'images=@path/to/image1.jpg' \
  -F 'images=@path/to/image2.jpg'
```

#### 5. Cáº­p nháº­t galaxy
```http
PUT /api/galaxies/:id
```
CÃ¹ng format vá»›i POST, nhÆ°ng cáº­p nháº­t galaxy cÃ³ sáºµn.

#### 6. XÃ³a galaxy
```http
DELETE /api/galaxies/:id
```

#### 7. Thá»‘ng kÃª
```http
GET /api/stats
```
Tráº£ vá» thá»‘ng kÃª tá»•ng quan vá» há»‡ thá»‘ng.

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c

```
galaxy-viewer-backend/
â”œâ”€â”€ server.js              # Main server file
â”œâ”€â”€ package.json           # Dependencies vÃ  scripts
â”œâ”€â”€ .env.example          # Environment configuration example
â”œâ”€â”€ README.md             # Documentation
â”œâ”€â”€ data/                 # JSON data storage
â”‚   â””â”€â”€ galaxies.json     # Galaxy data
â”œâ”€â”€ uploads/              # Uploaded images
â”œâ”€â”€ songs/               # Uploaded songs
â””â”€â”€ logs/                # Application logs (if implemented)
```

## ğŸ”§ Cáº¥u hÃ¬nh

### File Upload
- KÃ­ch thÆ°á»›c tá»‘i Ä‘a: 50MB per file
- Äá»‹nh dáº¡ng hÃ¬nh áº£nh: jpg, jpeg, png, gif, webp
- Äá»‹nh dáº¡ng Ã¢m thanh: mp3, wav, ogg, m4a

### CORS
Server há»— trá»£ CORS cho phÃ©p frontend truy cáº­p tá»« cÃ¡c domain khÃ¡c nhau.

## ğŸ› ï¸ Development

### Scripts cÃ³ sáºµn
```bash
npm run dev     # Cháº¡y vá»›i nodemon (auto-reload)
npm start       # Cháº¡y production mode
npm test        # Cháº¡y tests (náº¿u cÃ³)
npm run lint    # Check code style
```

### ThÃªm tÃ­nh nÄƒng má»›i
1. Táº¡o route má»›i trong `server.js`
2. ThÃªm validation cáº§n thiáº¿t
3. Cáº­p nháº­t documentation
4. Test API endpoints

## ğŸš€ Deployment

### Heroku
```bash
# Táº¡o Heroku app
heroku create galaxy-viewer-api

# Set environment variables
heroku config:set NODE_ENV=production

# Deploy
git push heroku main
```

### Railway/Render
1. Connect repository
2. Set environment variables
3. Deploy automatically

### VPS/Server
```bash
# Vá»›i PM2
npm install -g pm2
pm2 start server.js --name galaxy-api
pm2 startup
pm2 save
```

## ğŸ“Š Monitoring

### Health Check
Server cung cáº¥p endpoint `/health` Ä‘á»ƒ monitor:
```json
{
  "status": "OK",
  "timestamp": "2025-01-01T00:00:00.000Z"
}
```

## ğŸ” Security Notes

- Validate táº¥t cáº£ input tá»« client
- Giá»›i háº¡n kÃ­ch thÆ°á»›c file upload
- Rate limiting cho production
- HTTPS cho production
- Environment variables cho sensitive data

## ğŸ¤ Contributing

1. Fork repository
2. Táº¡o feature branch
3. Commit changes
4. Push to branch
5. Create Pull Request

## ğŸ“„ License

MIT License - see LICENSE file for details.

## ğŸ“ Support

Náº¿u cÃ³ váº¥n Ä‘á» hoáº·c cÃ¢u há»i:
- Táº¡o issue trÃªn GitHub
- Email: support@vu2005.com

---

Made with â¤ï¸ for love messages in the galaxy! ğŸŒŒ